<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Custom Element based Tests</title>
</head>
<body>
	<main>
		<test-1></test-1>
	</main>
	<script type="module">
		import Base from '../../src/custom-elements/base.mjs';
		import html from '../../src/templating/html.mjs';
		import on from '../../src/templating/users/on.mjs';
		import delay from '../../src/lib/delay.mjs';
		import range from '../../src/lib/range.mjs';
		import css from '../../src/templating/css.mjs';
		import mount from '../../src/templating/mount.mjs';
		import NEVER from '../../src/lib/never.mjs';

		class Test1 extends Base {
			async run(abortSignal) {
				const unmount = mount(html`
					${(async function*() {
						while (1) {
							yield css`:host {
								color: lime;
							}`;
							await delay(1000);
							yield css`:host {
								background-color: lime;
							}`;
							await delay(1000);
						}
					})()}
					${(async function*() {
						while (1) {
							for (const i of range(20, 0)) {
								yield 'a'.repeat(i);
								await delay(500);
							}
						}
					})()}
				`,
				this.shadowRoot);
				abortSignal.addEventListener('abort', unmount);
			}
		}
		customElements.define('test-1', Test1);
	</script>
	<template id="pregenerated-templates">
	</template>
</body>
</html>