<!DOCTYPE html>
<html>
<head>
	<title>Tests for: js-min</title>
</head>
<body>
	<style>
		.template, .instance {
			border: black 1px solid;
			padding: 1em;
			margin: 1em;
		}
		.instance {
			border-color: #eee;
		}
	</style>
	<h1>These are tests for my JavaScript Framework</h1>
	<p>You can find out more about it at <a href="https://github.com/evan-brass/js-framework">https://github.com/evan-brass/js-framework</a> or view the code that generates these examples here: <a href="https://github.com/evan-brass/js-framework/blob/master/test.html">https://github.com/evan-brass/js-framework/blob/master/test.html</a></p>
	<script type="module" src="./src/tests/template.test.mjs"></script>
	<script type="module">
		import LiveData from './src/live-data.mjs';
		import {s, on} from './src/expressions.mjs';
		import html from './src/min.mjs';
		import {ArrayInstance} from './src/instance.mjs';
		const tests = [
			(function(){
				const color = new LiveData();
				color.value = 'black';
				return html`
				<h2 class="testing-css">Test Modifying CSS using NodePart</h2>
				<style>.testing-css{ color: ${color}; }</style>
				${new ArrayInstance([
					'Red', 'Cornsilk', 'Black', 'Navy', 'Teal'
				].map(val => html`<button ${on('click', _ => color.value = val)}>${s(val)}</button>`))}
				`;
			})(),
			(function(){
				const radius = new LiveData();
				radius.value = 50;
				return html`
				<h2>Test modifying SVG attribute</h2>
				<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
  					<circle cx="50" cy="50" r="${radius}"/>
				</svg>
				<input type="range" 
					value="${s(radius.value)}" 
					min="10" max="70" step="1" 
					${on('change', e => radius.value = e.target.valueAsNumber)}
				/>
				`;
			})(),
//			/*
			// Simple Test with Comment node
			html`
				<section class="${s("a")} mixed with ${s("b")} other things">
					<header ${s({class: "purple"})}>
						<h1>${s("Text Location")}</h1>
					</header>
					<!-- Test user comments: } not; JSON' { -->
				</section>
			`,

			// Test if the marker get's lost when it's value doesn't match the attribute
			html`
				<form action="" method="">
					<select>
						<option selected="before ${s('')} after">Guts of an option</option>
					</select>
				</form>
			`,


			// Sample with event handlers
			(function(){
				const count = new LiveData();
				count.value = 10;
				return html`
					<button ${on('click', () => count.value -= 1)}>-</button>
					${count}
					<button ${on('click', () => count.value += 1)}>+</button>
				`;
			})(),

			// Troubleshooting a bug
			html`${s('another')} ${s('hello')}`,

//			*/
			
			// Test for using multiple templates swapped by async generator as a state machine
			html`${(async function*() {
				const count = new LiveData();
				count.value = 10;
				yield html`First: Set the count to 25...<br />
					<button ${on('click', () => count.value -= 1)}>-</button>
					${count}
					<button ${on('click', () => count.value += 1)}>+</button>
				`;
				for await(const val of count) {
					if (val == 25) break;
				}
				count.value = 0;
				yield html`
					Next: Set the thingy to 5<br />
					<label>
						${count}
						<input type="range" 
							value="${s(count.value)}" 
							min="0" max="10" step="1" 
							${on('change', e => count.value = e.target.valueAsNumber)}
						/>
					</label>
				`;
				for await(const val of count) {
					if (val == 5) break;
				}
				yield `Good Job ðŸŽ‰  Thank you for following along`;
			})()}`

		];
		for (const test of tests) {
			const instanceContainer = document.createElement('div');
			instanceContainer.classList.add('instance');
			instanceContainer.appendChild(test.getFragment());
			document.body.append(instanceContainer);
		}
	</script>
</body>
</html>