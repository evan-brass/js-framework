<!DOCTYPE html>
<html>
<head>
	<title>Custom Element based Tests</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<main>
		<test-1></test-1>
	</main>
	<script type="module">
		import Base from '../base.mjs';
		import html from '../html.mjs';
		import on from '../users/on.mjs';
		import delay from '../lib/delay.mjs';
		import range from '../lib/range.mjs';
		import css from '../users/css.mjs';
		import mount from '../mount.mjs';
		import NEVER from '../lib/never.mjs';

		class Test1 extends Base {
			*run() {
				const unmount = mount(html`
					${(async function*() {
						while (1) {
							yield css`:host {
								color: lime;
							}`;
							await delay(1000);
							yield css`:host {
								background-color: lime;
							}`;
							await delay(1000);
						}
					})()}
					${(async function*() {
						while (1) {
							for (const i of range(20, 0)) {
								yield 'a'.repeat(i);
								await delay(500);
							}
						}
					})()}
				`,
				this.shadowRoot)
				try {
					yield NEVER;
				} finally {
					unmount();
				}
			}
		}
		customElements.define('test-1', Test1);
	</script>
	<template id="pregenerated-templates">
	</template>
</body>
</html>